
<!--
This file is loaded directly from index.html, and is the wrapper for the entire application.
Different "views" are loaded by the ng-view call (although chat views is a special case that
is explained in the comments).
 -->

<div ng-controller="lxVideoChatAppViewCtrl">
    <div class="container cl-container-padding-and-margins">



        <div lx-show-unseen-message-count-directive></div>

        {% include "lx-templates/lx-title-row.html" %}

        <div lx-watch-for-error-entering-into-room>
            <div ng-controller="lxMainVideoCtrl">
                <div ng-if="videoStateInfoObject.numOpenVideoExchanges >= 1">
                    {% include "lx-templates/lx-tc-check-if-system-supports-web-rtc.html" %}
                    <div lx-check-if-system-supports-web-rtc-directive></div>
                    {% include "lx-templates/lx-tc-access-camera.html" %}
                    <div lx-access-camera-and-microphone-directive></div>
                </div>

                <!-- ng-view will call in the appropriate template for the current URL location -->
                <div class="row cl-row-no-margins cl-hide-row-overflow">
                    <div class="cl-main-ng-view-area-relative-wrapper"
                     ng-swipe-left="handleSwipeLeft($event)"
                     ng-swipe-right="handleSwipeRight($event)"
                     >


                        <!-- lx-main-menu.html contains the "main" menu that displays website controls -->
                        {% include 'lx-templates/lx-main-menu.html' %}

                        <!-- Start the "common display area" -->

                        <div ng-view class="cl-ng-view cl-fade-in-main-view"></div>

                        <!-- Chat views are "faked" in the ng-view directive and are over-written by lx-chatbox.html.
                             Read comments in lx-chatbox.html for more details. -->
                        {% include 'lx-templates/lx-chatbox.html' %}


                        {% include 'lx-templates/lx-main-video-element.html' %}
                        {% include "lx-templates/lx-mini-video-elements.html" %}

                        <!-- End the "common display area" -->

                        {% include 'lx-templates/lx-notifications.html' %}
                    </div>
                </div>
            </div>
        </div>



        <div lx-initialize-channel-directive></div>
        <div lx-initialize-turn-directive></div>

        {% include "lx-templates/lx-debugging-info.html" %}

    </div>

{% raw %}
    <!-- This is the "footer" that appears at the bottom of every page. It contains control buttons and is intended
         to make the user's navigation of the site faster. -->
    <div class="cl-sticky-footer">
        <div class="container cl-container-padding-and-margins">
            <div class="row cl-row-no-margins">
                <div class="col-xs-12 cl-col-no-padding">
                    <nav class="navbar navbar-default cl-navbar">

                        <ul class="nav navbar-nav cl-navbar-nav cl-navbar-nav-left">
                            <li><a href="/"><span class="icon-lx-power-switch cl-text-size-1_5em"></span></a>
                        </ul>

                        <ul class="nav navbar-nav cl-navbar-nav cl-navbar-nav-right">
                            <li><a href="/"><span class="icon-lx-new-chat cl-text-size-1_5em"></span></a>
                            <li ng-if="chatRoomDisplayObject.lastChatRoomNameFromUrl">
                                <a href="/{{ chatRoomDisplayObject.lastChatRoomNameFromUrl }}">
                                    <span class="icon-lx-chat-bubble-dual cl-text-size-1_5em"></span>
                                </a>
                            </li>
                            <!--<li><a href="/">Friends</a>-->
                            <!--<li><a href="/">Profile</a>-->
                            <!--<li class="active"><a href="/">Settings</a>-->
                            <li ng-class="notificationMenuObject.partialShowNotificationMenuAndGetAttention?'cl-pulse-background-attention': ''">
                                <a href="" lx-notification-menu-button-directive lx-click-once-directive>
                                    <span class="icon-lx-flag cl-text-size-1_5em"></span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
{% endraw %}

</div>
